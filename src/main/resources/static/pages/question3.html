<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>爱你呦</title>
  <script src="https://cdn.jsdelivr.net/npm/vue"></script>
  <script src="../js/axios-0.18.0.js"></script>
</head>
<body>
<div id="qusetion3" >
  <h3>问题{{pageTime}}:假设你在公共账户里面放了90个游戏币，而其他三个人放入游戏币的数量分别为0、4、6，那你可以从公共账户中得到额外的游戏币吗？这一轮游戏结束后你一共可以将多少游戏币存到你的个人账户中呢？</h3></br>
  <input type="radio" v-model="checkValue" value="A"/>A.能，110
  <input type="radio" v-model="checkValue" value="B"/>B.不能，10
  <input type="radio" v-model="checkValue" value="C"/>C.不能，100
  <input type="radio" v-model="checkValue" value="D"/>D.不能，50<br><br>
  <input type="button" value="提交答案" @click="checkAnswer()" /><br><br><br><br>
  <img src="../img/liucheng.png">
</div>
</body>
<script>
  new Vue({
    backend_url:"http://localhost:8888",
    el:'#qusetion3',
    data:{
      checkValue:"",
      userName:"",
      pageTime:0,
      pageIndex1:0,
      pageIndex2:0,
      pageIndex3:0,
      pageIndexs:[0,1,2]
    },
    created:function(){
      this.getUserName()
    },
    methods:{
      remove(val){
        for (let i = 0; i <this.pageIndexs.length; i++) {
          if (this.pageIndexs[i] == val) this.pageIndexs.splice(i, 1);
        }
      },
  checkAnswer(){
        if (this.checkValue == 'B'){
          if(this.pageTime == 3){
            alert("恭喜你全部答对,马上进入真正的游戏吧!!")
          }else {
            alert("回答正确请继续作答")
          }
          var username = this.userName
          if (this.pageTime ==1){
            //第一个页面
            this.remove(this.pageIndex1)
            this.pageIndex2 = this.pageIndexs[Math.floor(Math.random()*(1+1-0)+0)]
            location.href="question"+(this.pageIndex2+1)+".html?userName="+username+"&pageIndex1="+this.pageIndex1+"&pageIndex2="+this.pageIndex2+
                "&pageTime=2"
          } else if (this.pageTime ==2) {
            //第二个页面
            this.remove(this.pageIndex1)
            this.remove(this.pageIndex2)
            this.pageIndex3 = this.pageIndexs[0]
            location.href="question"+(this.pageIndex3+1)+".html?userName="+username+ "&pageTime=3"
          }else {
            //第三个页面
            location.href="room.html?userName="+username
          }
        } else {
          alert("回答错误,请重新作答")
        }
      },
      getUserName(){
        var url = location.search //获取url中"?"符后的字串 ('?modFlag=business&role=1')
        var theRequest = new Object()
        if (url.indexOf('?') != -1) {
          var str = url.substr(1) //substr()方法返回从参数值开始到结束的字符串；
          var strs = str.split('&')
          for (var i = 0; i < strs.length; i++) {
            theRequest[strs[i].split('=')[0]] = strs[i].split('=')[1]
          }
          this.userName = theRequest.userName
          this.pageTime = parseInt(theRequest.pageTime)
          this.pageIndex1 = parseInt(theRequest.pageIndex1)
          if (this.pageTime ==2){
            this.pageIndex2 = parseInt(theRequest.pageIndex2)
          }
        }
      }
    }
  })
</script>
<style>
  html{
    width: 100%;
    height: 100%;
    overflow: hidden;
    font-style: sans-serif;
  }
  body{
    width: 200%;
    height: 100%;
    font-family: 'Open Sans',sans-serif;
    margin: 0;
    background-color: #f0f0f0;
  }
  #qusetion3{
    position: absolute;
    top: 30%;
    left:40%;
    margin: -150px 0 0 -150px;
    width: 600px;
    height: 300px;
  }
</style>
</html>